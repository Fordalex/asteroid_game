{% extends 'base.html' %}
{% block header %}Mastermind{% endblock %}
{% block content %}


<div class="d-flex justify-content-center">
    <div class="page-container">
        <a class="how-to-play ml-2" href="index.html">Rules</a>
        <div class="row m-0 p-0 mb-2">
            <div class="col-12 m-0 d-flex justify-content-center ready-button-container">
                <div id="ready-start-button-container">
                    <i class="fas fa-long-arrow-alt-right left-play-arrow"></i>
                    <button onclick="start()" id="ready-button" class="play-button-classic">Play!<i
                            class="mx-2 fas fa-play"></i></button>
                    <i class="fas fa-long-arrow-alt-left right-play-arrow"></i>
                </div>
            </div>
        </div>

        <div class="row m-0 p-0">

            <!-- Mastermind board -->

            <div class="col-sm-12 col-md-6 p-0 mb-4 d-flex justify-content-center">
                <div class="mastermind-board-container">

                    <div class="row m-0 p-0 answer-container">
                        <div class="col-9 m-0 p-0 answer-wrapper">
                            <div id="master-cover" class="master-mind-cover ml-2"></div>
                            <div class="d-flex align-items-center masters-counters-position">
                                <div class="counter-black-hole" id="master-one"></div>
                                <div class="counter-black-hole" id="master-two"></div>
                                <div class="counter-black-hole" id="master-three"></div>
                                <div class="counter-black-hole" id="master-four"></div>
                            </div>
                        </div>
                        <div class="col-3 side-border-divider p-0 m-0">
                            <h5 class="p-2 m-0 text-center text-dark">Choose Counter</h5>
                        </div>
                    </div>

                    <div class="row m-0 p-0">
                        <div class="col-9 p-0 m-0">
                            <div class="row board-row-height m-0 p-0 mt-3">
                                <div class=" d-flex align-items-center m-0  padding-left">
                                    <div class="counter-black-hole" id="r-10-c-one"></div>
                                    <div class="counter-black-hole" id="r-10-c-two"></div>
                                    <div class="counter-black-hole" id="r-10-c-three"></div>
                                    <div class="counter-black-hole" id="r-10-c-four"></div>
                                </div>
                                <div class="m-0 ml-2 p-0 d-flex justify-content-center align-items-center">
                                    <div class="marker-container" id="peg-container-10">

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-3 m-0 pt-3 p-0 side-border-divider">
                            <div class="choose-red choose-button" onclick="chooseColour(redCounter,0)"></div>
                        </div>
                    </div>
                    <div class="row m-0 p-0">
                        <div class="col-9 p-0 m-0">
                            <div class="row board-row-height m-0 p-0 mt-0">
                                <div class=" d-flex align-items-center m-0  padding-left">
                                    <div class="counter-black-hole" id="r-9-c-one"></div>
                                    <div class="counter-black-hole" id="r-9-c-two"></div>
                                    <div class="counter-black-hole" id="r-9-c-three"></div>
                                    <div class="counter-black-hole" id="r-9-c-four"></div>
                                </div>
                                <div class="m-0  ml-2 p-0 d-flex justify-content-center align-items-center">
                                    <div class="marker-container" id="peg-container-9">

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-3 m-0 p-0 side-border-divider">
                            <div class="choose-green choose-button" onclick="chooseColour(greenCounter,1)"></div>
                        </div>
                    </div>
                    <div class="row m-0 p-0">
                        <div class="col-9 p-0 m-0">
                            <div class="row board-row-height m-0 p-0 mt-0">
                                <div class=" d-flex align-items-center m-0  padding-left ">
                                    <div class="counter-black-hole" id="r-8-c-one"></div>
                                    <div class="counter-black-hole" id="r-8-c-two"></div>
                                    <div class="counter-black-hole" id="r-8-c-three"></div>
                                    <div class="counter-black-hole" id="r-8-c-four"></div>
                                </div>
                                <div class="m-0 ml-2 p-0 d-flex justify-content-center align-items-center">
                                    <div class="marker-container" id="peg-container-8">

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-3 m-0 p-0 side-border-divider">
                            <div class="choose-yellow choose-button" onclick="chooseColour(yellowCounter,2)"></div>
                        </div>
                    </div>
                    <div class="row m-0 p-0">
                        <div class="col-9 p-0 m-0">
                            <div class="row board-row-height m-0 p-0 mt-0">
                                <div class=" d-flex align-items-center m-0 padding-left">
                                    <div class="counter-black-hole" id="r-7-c-one"></div>
                                    <div class="counter-black-hole" id="r-7-c-two"></div>
                                    <div class="counter-black-hole" id="r-7-c-three"></div>
                                    <div class="counter-black-hole" id="r-7-c-four"></div>
                                </div>
                                <div class="m-0 p-0 ml-2 d-flex justify-content-center align-items-center">
                                    <div class="marker-container" id="peg-container-7">

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-3 m-0 p-0 side-border-divider easy-counter-selector-container">
                            <div class="choose-blue choose-button" onclick="chooseColour(blueCounter,3)"></div>
                        </div>
                    </div>
                    <div class="row m-0 p-0">
                        <div class="col-9 p-0 m-0">
                            <div class="row board-row-height m-0 p-0 mt-0">
                                <div class=" d-flex align-items-center m-0 padding-left">
                                    <div class="counter-black-hole" id="r-6-c-one"></div>
                                    <div class="counter-black-hole" id="r-6-c-two"></div>
                                    <div class="counter-black-hole" id="r-6-c-three"></div>
                                    <div class="counter-black-hole" id="r-6-c-four"></div>
                                </div>
                                <div class="m-0 ml-2 p-0 d-flex justify-content-center align-items-center">
                                    <div class="marker-container" id="peg-container-6">

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-3 m-0 p-0 side-border-divider easy-counter-selector-container">
                            <div class="choose-orange choose-button" onclick="chooseColour(orangeCounter,4)"></div>
                        </div>
                    </div>
                    <div class="row m-0 p-0">
                        <div class="col-9 p-0 m-0">
                            <div class="row board-row-height m-0 p-0 mt-0">
                                <div class=" d-flex align-items-center m-0 padding-left">
                                    <div class="counter-black-hole" id="r-5-c-one"></div>
                                    <div class="counter-black-hole" id="r-5-c-two"></div>
                                    <div class="counter-black-hole" id="r-5-c-three"></div>
                                    <div class="counter-black-hole" id="r-5-c-four"></div>
                                </div>
                                <div class="m-0 ml-2 p-0 d-flex justify-content-center align-items-center">
                                    <div class="marker-container" id="peg-container-5">

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-3 m-0 p-0 side-border-divider medium-counter-selector-container">

                            <div class="choose-white choose-button" onclick="chooseColour(whiteCounter,5)"></div>
                        </div>
                    </div>
                    <div class="row m-0 p-0">
                        <div class="col-9 p-0 m-0">
                            <div class="row board-row-height m-0 p-0 mt-0">
                                <div class=" d-flex align-items-center m-0  padding-left">
                                    <div class="counter-black-hole" id="r-4-c-one"></div>
                                    <div class="counter-black-hole" id="r-4-c-two"></div>
                                    <div class="counter-black-hole" id="r-4-c-three"></div>
                                    <div class="counter-black-hole" id="r-4-c-four"></div>
                                </div>
                                <div class="m-0 ml-2 p-0 d-flex justify-content-center align-items-center">
                                    <div class="marker-container" id="peg-container-4">

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-3 m-0 p-0 side-border-divider medium-counter-selector-container">

                            <div id="choose-hole" onclick="chooseColour(holeCounter,6)"></div>
                        </div>
                    </div>
                    <div class="row m-0 p-0">
                        <div class="col-9 p-0 m-0">
                            <div class="row board-row-height m-0 p-0 mt-0">
                                <div class=" d-flex align-items-center m-0  padding-left">
                                    <div class="counter-black-hole" id="r-3-c-one"></div>
                                    <div class="counter-black-hole" id="r-3-c-two"></div>
                                    <div class="counter-black-hole" id="r-3-c-three"></div>
                                    <div class="counter-black-hole" id="r-3-c-four"></div>
                                </div>
                                <div class="m-0 ml-2 p-0 d-flex justify-content-center align-items-center">
                                    <div class="marker-container" id="peg-container-3">

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-3 m-0 p-0 side-border-divider">
                            <button class="check-round-button" onclick="removeCounter()">Remove</button>
                        </div>
                    </div>
                    <div class="row m-0 p-0">
                        <div class="col-9 p-0 m-0">
                            <div class="row board-row-height m-0 p-0 mt-0">
                                <div class=" d-flex align-items-center m-0  padding-left">
                                    <div class="counter-black-hole" id="r-2-c-one"></div>
                                    <div class="counter-black-hole" id="r-2-c-two"></div>
                                    <div class="counter-black-hole" id="r-2-c-three"></div>
                                    <div class="counter-black-hole" id="r-2-c-four"></div>
                                </div>
                                <div class="m-0 ml-2 p-0 d-flex justify-content-center align-items-center">
                                    <div class="marker-container" id="peg-container-2">

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-3 m-0 p-0 side-border-divider">
                            <div id="check-round-arrow"></div>
                            <button class="check-round-button" onclick="checkCounters()">Check</button>
                        </div>
                    </div>
                    <div class="row m-0 p-0">
                        <div class="col-9 p-0 m-0">
                            <div class="row board-row-height m-0 p-0 mt-0">
                                <div class=" d-flex align-items-center m-0  padding-left">
                                    <div class="counter-black-hole" id="r-1-c-one"></div>
                                    <div class="counter-black-hole" id="r-1-c-two"></div>
                                    <div class="counter-black-hole" id="r-1-c-three"></div>
                                    <div class="counter-black-hole" id="r-1-c-four"></div>
                                </div>
                                <div class="m-0 ml-2 p-0 d-flex justify-content-center align-items-center">
                                    <div class="marker-container" id="peg-container-1">

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-3 m-0 p-0 side-border-divider">
                            <div>
                                <p class="p-smaller-font m-0">Attempts: <span id="round-counter">1</span></p>
                                <div class="d-flex justify-content-center align-items-center">
                                    <i class="fas fa-stopwatch mx-1 text-black-50"></i>
                                    <p class="p-smaller-font m-0"><span id="timer-min"></span><span class="mx-1">:</span><span id="timer-sec"></span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <!-- // Mastermind board -->

            <!-- shop and stats -->

            <div class="col-sm-12 col-md-6 px-0 d-flex px-1">
                <div class="container-fluid p-0">
                    <div class="mastermind-menu mb-2 fixed-width-section">
                        <div class="row m-0 p-0">
                            <div class="col-6 m-0 p-0 d-flex justify-content-start">
                                <p class="m-0"><i class="fas fa-coins mx-2 coin-color"></i><span id="player-coins" class="mr-2 font-weight-bold"></span>Coins</p>
                            </div>
                            <div class="col-6 m-0 p-0 d-flex justify-content-end align-items-center">
                                <div id="sound-on-off">
                                    <i class="fas fa-volume-up mr-3"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mastermind-menu mb-2 fixed-width-section">
                        <h4 class="text-center mb-2">Accessory Shop</h4>



                        <div class="expand-button">
                            <h5 class="m-0 d-inline">Counters</h5>
                            <i class="fas fa-angle-double-down dropdown-arrow theme classic-theme"></i>
                        </div>


                        <div class="expand-container justify-around">
                            <div class="shop-counter-container p-2 fruit-purchase-background" id="fruit-counters-purchase">
                                <p><b>Fruit</b><i class="fas fa-lemon ml-2 text-warning"></i></p>
                                <p class="m-0"><i class="fas fa-coins mx-2 coin-color"></i>200</p>
                            </div>

                            <div class="shop-counter-container p-2 candy-purchase-background" id="candy-counters-purchase">
                                <p><b>Candy</b><i class="fas fa-candy-cane ml-2 text-danger"></i></p>
                                <p class="m-0"><i class="fas fa-coins mx-2 coin-color"></i>350</p>
                            </div>

                            <div class="shop-counter-container p-2 gem-purchase-background" id="gem-counters-purchase">
                                <p><b>Gems</b><i class="far fa-snowflake ml-2 text-light"></i></p>
                                <p class="m-0"><i class="fas fa-coins mx-2 coin-color"></i>500</p>
                            </div>
                        </div>

                        <div class="expand-button ">
                            <h5 class=" m-0 d-inline">Themes</h5>
                            <i class="fas fa-angle-double-down dropdown-arrow theme classic-theme"></i>
                        </div>

                        <div class="expand-container justify-around">
                            <div class="shop-counter-container p-2 fruit-background-container" id="fruit-background-purchase">
                                <p><b>Fruit</b><i class="fas fa-lemon ml-2 text-warning"></i></p>
                                <p class="m-0"><i class="fas fa-coins mx-2 coin-color"></i><span>100</span></p>
                            </div>

                            <div class="shop-counter-container p-2 pink-background-container" id="pink-background-purchase">
                                <p><b>Pink</b><i class="fas fa-candy-cane ml-2 text-danger"></i></p>
                                <p class="m-0"><i class="fas fa-coins mx-2 coin-color"></i>200</p>
                            </div>

                            <div class="shop-counter-container p-2 ice-background-container" id="ice-background-purchase">
                                <p><b>Ice</b><i class="far fa-snowflake ml-2 text-light"></i></p>
                                <p class="m-0"><i class="fas fa-coins mx-2 coin-color"></i>300</p>
                            </div>
                        </div>
                    </div>


                    <!-- inventory -->

                    <div class="my-2 mastermind-menu fixed-width-section">
                        <h4 class="text-center">Inventory</h4>
                        <div class="expand-button">
                            <h5 class="d-inline">Counters</h5>
                            <i class="fas fa-angle-double-down dropdown-arrow theme classic-theme"></i>
                        </div>
                        <div class="expand-container">
                            <div class="justify-around">
                                <div class="counters-unlocked inventory-sections inventory-background-classic-theme" id="basic-counter-inventory-select">
                                    <div id="basic-counter-inventory"></div>
                                </div>
                                <div class="counters-unlocked inventory-sections inventory-background-classic-theme inventory-selected" id="classic-counter-inventory-select">
                                    <div id="classic-counter-inventory"></div>
                                </div>
                                <div class="inventory-sections inventory-background-classic-theme" id="fruit-counter-inventory-select">
                                    <i class="fas fa-lock"></i>
                                </div>
                                <div class="inventory-sections inventory-background-classic-theme" id="candy-counter-inventory-select">
                                    <i class="fas fa-lock"></i>
                                </div>
                                <div class="inventory-sections inventory-background-classic-theme" id="gem-counter-inventory-select">
                                    <i class="fas fa-lock"></i>
                                </div>
                            </div>
                            <div class="mt-2">
                                <p class="m-0">Counters can only be changed before a game.</p>
                            </div>
                        </div>
                        <div class="expand-button">
                            <h5 class="d-inline">Themes</h5>
                            <i class="fas fa-angle-double-down dropdown-arrow theme classic-theme"></i>
                        </div>
                        <div class="expand-container justify-around">
                            <div class="themes-unlocked inventory-selected shop-theme-container d-flex justify-content-center basic-theme-inventory p-4" id="select-classic-theme">

                            </div>
                            <div class="shop-theme-container d-flex justify-content-center p-4" id="select-fruit-theme">
                                <i class="fas fa-lock"></i>
                            </div>
                            <div class="shop-theme-container d-flex justify-content-center p-4" id="select-pink-theme">
                                <i class="fas fa-lock"></i>
                            </div>
                            <div class="shop-theme-container d-flex justify-content-center p-4" id="select-ice-theme">
                                <i class="fas fa-lock"></i>
                            </div>
                        </div>
                    </div>

                    <div class="my-2 mastermind-menu fixed-width-section">
                        <h4 class="text-center"><span id="player-name-stats" class="colour-secondary theme"></span> Stats
                        </h4>

                        <div class="mx-5"></div>
                        <div class="d-flex justify-content-around">
                            <table id="stats-table">
                                <tr>
                                    <th>Round</th>
                                    <th>Attempts</th>
                                    <th>Time</th>
                                    <th>Coins</th>
                                    <th>Difficulty</th>
                                </tr>
                            </table>
                        </div>
                        <hr>

                        <div class=" d-flex justify-content-around align-items-center">
                            <h4><span class="colour-secondary theme"></span> Total <span class="theme classic-theme">Stats</span>
                            </h4>
                            <table>
                                <tr>
                                    <th>Attempts</th>
                                    <th>Coins</th>
                                </tr>
                                <tr>
                                    <th id="totalStatAttempts">0</th>
                                    <th id="totalStatCoins">0</th>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- // shop and stats -->

    <!-- First Modal for players name and difficulty -->
    <div class="modal fade" id="enterNameModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Welcome to Mastermind</h5>
                </div>
                <div class="modal-body p-0">
                    <div class="px-3 pt-3">
                        <h6>Please Enter Your Name:</h6>
                        <input type="text" id="inputPlayerName" maxlength="15">
                    </div>
                    <hr>
                    <div class="px-3">
                        <h6 class="mt-2">Please Select Your Difficulty:</h6>
                        <p>The harder the difficulty the more you'll be rewarded.</p>
                        <label class="difficuly-select-entry"><input type="radio" name="difficulty"
                                class="easy-difficulty"> Easy</label>
                        <label class="difficuly-select-entry"><input type="radio" name="difficulty"
                                class="medium-difficulty">
                            Medium</label>
                        <label class="difficuly-select-entry"><input type="radio" name="difficulty"
                                class="hard-difficulty"> Hard</label>
                        <div id="enter-name-message" class="mt-2">
                            <p class="text-danger">Please enter your name and select difficulty.</p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer" id="close-start-modal">
                    <Button class="btn btn-secondary">Nope</Button>
                </div>
            </div>
        </div>
    </div>

    <!-- Winner modal -->
    <div class="modal fade" id="winnerModal" tabindex="-1" role="dialog" aria-labelledby="winnerModal" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Winner</h5>

                </div>
                <div class="modal-body p-4">
                    <p>Well Done <span id="player-name-winner"></span>!!</p>
                    <p>You worked it out in <span id="attempts-round"></span> attempts.</p>
                    <p>It only took you <i class="fas fa-stopwatch mx-2 text-black-50"></i><span id="time-taken-min"></span> : <span id="time-taken-sec"></span></p>
                    <p>Mastermind has rewarded you with<i class="fas fa-coins mx-2 coin-color"></i>
                        <b>50</b></p>
                    <p>Round Bonus: <i class="fas fa-coins mx-2 coin-color"></i><span id="round-coin-bonus" class="font-weight-bold"></span></p>
                    <p>Time Bonus: <i class="fas fa-coins mx-2 coin-color"></i><span id="timer-bonus" class="font-weight-bold"></span></p>
                    <p>Difficulty Bonus: <i class="fas fa-coins mx-2 coin-color"></i><span id="difficulty-bonus" class="font-weight-bold"></span></p>
                    <p>Total coins for that round: <i class="fas fa-coins mx-2 coin-color"></i><span id="total-coins-round" class="font-weight-bold"></span> Coins</p>
                    <h4>Try a different difficulty?</h4>
                    <label><input type="radio" name="difficulty" class="easy-difficulty"> Easy</label>
                    <label><input type="radio" name="difficulty" class="medium-difficulty"> Medium</label>
                    <label><input type="radio" name="difficulty" class="hard-difficulty"> Hard</label>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-dismiss="modal" id="firstModal" onclick="loop()">Okay!</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loser modal -->
    <div class="modal fade" id="loserModal" tabindex="-1" role="dialog" aria-labelledby="loserModal" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Loser</h5>
                </div>
                <div class="modal-body p-4">
                    <p>Unfortunately <span id="player-name-loser"></span>, the computer outsmarted you this time!
                    </p>
                    <p>Mastermind took<i class="fas fa-coins mx-2 coin-color"></i><b class="text-danger">50</b> coins off you!</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-dismiss="modal" onclick="loop()">Try
                        Again!</button>

                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href='{{ url_for("static", filename="css/mastermind.css") }}'>
<style>
    
.mastermind-board-container {
    width: 310px;
    height: 525px;
    border-radius: 10px;
    background-image: url('{{ url_for("static", filename="img/mastermind/wood-background-two.png") }}');
    background-size: 100% 100%;
    box-shadow: rgba(0, 0, 0, 0.5) 4px 4px 8px;
    margin-right: 10px;
}
</style>
{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function () {
    $('#enterNameModal').modal({
        backdrop: 'static',
        keyboard: false
    });
    playerName = localStorage.getItem('playerName');
    if (playerName == null) {
        playerName = 'Player';
    }
    $('#inputPlayerName').attr('value',playerName);
    loop();
    $('.expand-container').hide();
    $('#player-coins').html(0);
});

/* drop down */

$('.expand-button').on('click', function () {
    $(this).next('div').slideToggle('slow');
    if ($(this).children('i').css('transform') == "none") {
        $(this).children('i').css('transform', "rotateZ(180deg)");
    } else {
        $(this).children('i').css('transform', "none");
    }
});

/* entry modal */

$('.difficuly-select-entry').on('click', function () {
    $('#close-start-modal').html(`<Button type="submit" class="btn btn-success" onclick="addName()" data-dismiss="modal">Okay</Button>`);
    $('#enter-name-message').html('<p class="text-success">Thank you, Enjoy!</p>');
});

/* players name */

var playerName;

function addName() {
    playerName = $('#inputPlayerName').val();
    $('#player-name-stats').text(playerName + "'s");
    if (playerName == 'cheat') {
        for (let i = 0; i < 8000; i++) {
            coins++;
        }
    }
    $('#player-coins').html(coins);
    localStorage.setItem('playerName', playerName);
}

/* variables */

var round = 1;
var holeSelect = 1;
var gameStarted = false;
var fullGames = 0;
var coins = 0;
var soundOn = true;

var playerLocationOne = 0;
var playerLocationTwo = 0;
var playerLocationThree = 0;
var playerLocationFour = 0;

var masterLocationOne = 0;
var masterLocationTwo = 0;
var masterLocationThree = 0;
var masterLocationFour = 0;

var winnerBoolean = false;

/* sound on/off */

$('#sound-on-off').on('click', function () {
    if (soundOn == true) {
        soundOn = false;
        $('#sound-on-off').children('i').remove();
        $('#sound-on-off').append('<i class="fas fa-volume-mute mr-3"></i>');
    } else {
        soundOn = true;
        $('#sound-on-off').children('i').remove();
        $('#sound-on-off').append('<i class="fas fa-volume-up mr-3"></i>');
    }
});

/* difficulty setting */

$('.easy-difficulty').on('click', function () {
    $('.not-in-use').remove();
    difficultySetting = 'easy';
    difficultyStats = 'E';
    difficultyGenerate = 3;
    $('.easy-counter-selector-container').append('<i class="fas fa-ban not-in-use"></i>');
    $('.medium-counter-selector-container').append('<i class="fas fa-ban not-in-use"></i>');
});
$('.medium-difficulty').on('click', function () {
    $('.not-in-use').remove();
    difficultySetting = 'medium';
    difficultyStats = 'M';
    difficultyGenerate = 5;
    $('.medium-counter-selector-container').append('<i class="fas fa-ban not-in-use"></i>');
});
$('.hard-difficulty').on('click', function () {
    $('.not-in-use').remove();
    difficultySetting = 'hard';
    difficultyStats = 'H';
    difficultyGenerate = 7;
});

var difficultySetting = '';
var difficultyStats = '';
var difficultyGenerate;

/* audio */

var startSound = new Audio();
startSound.src = "assets/audio/classic--game-start.wav";

var counterDown = new Audio();
counterDown.src = "assets/audio/classic--counter-down.wav";
var counterDownTwo = new Audio();
counterDownTwo.src = "assets/audio/classic--counter-down2.wav";
var counterDownThree = new Audio();
counterDownThree.src = "assets/audio/classic--counter-down3.wav";

var removeCounterSound = new Audio();
removeCounterSound.src = "assets/audio/classic--remove.wav";

var gameWon = new Audio();
gameWon.src = "assets/audio/classic--game-won.wav";

var gameOverSound = new Audio();
gameOverSound.src = "assets/audio/classic--game-lose.wav";

var lineCheckedSound = new Audio();
lineCheckedSound.src = "assets/audio/classic--line-checked.wav";

/* counter container selected drop down*/


$('body').on('click', '.counters-unlocked', function () {
    $('.counters-unlocked').removeClass('inventory-selected');
    $(this).addClass('inventory-selected');
});

$('body').on('click', '.themes-unlocked', function () {
    $('.themes-unlocked').removeClass('inventory-selected');
    $(this).addClass('inventory-selected');
});


/* buying counters */

redCounter = '<img src="{{ url_for("static", filename="img/mastermind/red-counter.png") }}" alt="red-counter" class="counter">';
greenCounter = '<img src="{{ url_for("static", filename="img/mastermind/green-counter.png") }}" alt="green-counter" class="counter">';
yellowCounter = '<img src="{{ url_for("static", filename="img/mastermind/yellow-counter.png") }}" alt="yellow-counter" class="counter">';
blueCounter = '<img src="{{ url_for("static", filename="img/mastermind/blue-counter.png") }}" alt="blue-counter" class="counter">';
orangeCounter = '<img src="{{ url_for("static", filename="img/mastermind/orange-counter.png") }}" alt="orange-counter" class="counter">';
whiteCounter = '<img src="{{ url_for("static", filename="img/mastermind/white-counter.png") }}" alt="white-counter" class="counter">';
var holeCounter = '';

var fruitCounterPurchased = false;
var candyCounterPurchased = false;
var gemCounterPurchased = false;

$('#fruit-counters-purchase').on('click', function () {
    if (coins >= 200 && fruitCounterPurchased == false) {
        fruitCounterPurchased = true;
        $('#fruit-counter-inventory-select').children().remove();
        $('#fruit-counter-inventory-select').append('<div><img src="assets/images/yellow-fruit-counter.png" alt="yellow-counter" class="counter-inventory"></div>');
        $('#fruit-counter-inventory-select').addClass('counters-unlocked');
        $('#fruit-counters-purchase').children('p').remove();
        $('#fruit-counters-purchase').append('<p class="text-success"><b>Purchased</b></p><i class="fas fa-check text-success"></i>');
        for (let i = 0; i < 200; i++) {
            coins--;
        }
        $('#player-coins').html(coins);
        $('#select-fruit-theme').addClass('theme-unlocked');
    }
});

$('#candy-counters-purchase').on('click', function () {
    if (coins >= 350 && candyCounterPurchased == false) {
        candyCounterPurchased = true;
        $('#candy-counter-inventory-select').children().remove();
        $('#candy-counter-inventory-select').append('<div><img src="assets/images/red-candy-counter.png" alt="red-counter" class="counter-inventory"></div>');
        $('#candy-counter-inventory-select').addClass('counters-unlocked');
        $('#candy-counters-purchase').children('p').remove();
        $('#candy-counters-purchase').append('<p class="text-success"><b>Purchased</b></p><i class="fas fa-check text-success"></i>');
        for (let i = 0; i < 350; i++) {
            coins--;
        }
        $('#player-coins').html(coins);
    }
});

$('#gem-counters-purchase').on('click', function () {
    if (coins >= 500 && gemCounterPurchased == false) {
        gemCounterPurchased = true;
        $('#gem-counter-inventory-select').children().remove();
        $('#gem-counter-inventory-select').append('<div><img src="assets/images/blue-gem-counter.png" class="counter-inventory"></div>');
        $('#gem-counter-inventory-select').addClass('counters-unlocked');
        $('#gem-counters-purchase').children('p').remove();
        $('#gem-counters-purchase').append('<p class="text-success"><b>Purchased</b></p><i class="fas fa-check text-success"></i>');
        for (let i = 0; i < 500; i++) {
            coins--;
        }
        $('#player-coins').html(coins);
    }
});

/* selecting counters */

$('#basic-counter-inventory-select').on('click', function () {
    if (gameStarted == false) {
        redCounter = '<div class="basic-red-counter basic-counter red-glow"></div>';
        greenCounter = '<div class="basic-green-counter basic-counter green-glow"></div>';
        yellowCounter = '<div class="basic-yellow-counter basic-counter yellow-glow"></div>';
        blueCounter = '<div class="basic-blue-counter basic-counter blue-glow"></div>';
        orangeCounter = '<div class="basic-orange-counter basic-counter orange-glow"></div>';
        whiteCounter = '<div class="basic-white-counter basic-counter white-glow"></div>';
    }
});

$('#classic-counter-inventory-select').on('click', function () {
    if (gameStarted == false) {
        redCounter = '<img src="{{ url_for("static", filename="img/mastermind/red-counter.png") }}" alt="red-counter" class="counter">';
        greenCounter = '<img src="{{ url_for("static", filename="img/mastermind/green-counter.png") }}" alt="green-counter" class="counter">';
        yellowCounter = '<img src="{{ url_for("static", filename="img/mastermind/yellow-counter.png") }}" alt="yellow-counter" class="counter">';
        blueCounter = '<img src="{{ url_for("static", filename="img/mastermind/blue-counter.png") }}" alt="blue-counter" class="counter">';
        orangeCounter = '<img src="{{ url_for("static", filename="img/mastermind/orange-counter.png") }}" alt="orange-counter" class="counter">';
        whiteCounter = '<img src="{{ url_for("static", filename="img/mastermind/white-counter.png") }}" alt="white-counter" class="counter">';
    }
});

$('#fruit-counter-inventory-select').on('click', function () {
    if (gameStarted == false && fruitCounterPurchased == true) {
        redCounter = '<img src="assets/images/red-fruit-counter.png" alt="red-counter" class="counter-noshadow">';
        greenCounter = '<img src="assets/images/green-fruit-counter.png" alt="green-counter" class="counter-noshadow">';
        yellowCounter = '<img src="assets/images/yellow-fruit-counter.png" alt="yellow-counter" class="counter-noshadow">';
        blueCounter = '<img src="assets/images/blue-fruit-counter.png" alt="blue-counter" class="counter-noshadow">';
        orangeCounter = '<img src="assets/images/orange-fruit-counter.png" alt="orange-counter" class="counter-noshadow">';
        whiteCounter = '<img src="assets/images/white-fruit-counter.png" alt="white-counter" class="counter-noshadow">';
    }
});

$('#candy-counter-inventory-select').on('click', function () {
    if (gameStarted == false && candyCounterPurchased == true) {
        redCounter = '<img src="assets/images/red-candy-counter.png" alt="red-counter" class="counter">';
        greenCounter = '<img src="assets/images/green-candy-counter.png" alt="green-counter" class="counter">';
        yellowCounter = '<img src="assets/images/yellow-candy-counter.png" alt="yellow-counter" class="counter">';
        blueCounter = '<img src="assets/images/blue-candy-counter.png" alt="blue-counter" class="counter">';
        orangeCounter = '<img src="assets/images/orange-candy-counter.png" alt="orange-counter" class="counter">';
        whiteCounter = '<img src="assets/images/white-candy-counter.png" alt="white-counter" class="counter">';
    }
});

$('#gem-counter-inventory-select').on('click', function () {
    if (gameStarted == false && gemCounterPurchased == true) {
        redCounter = '<img src="assets/images/red-gem-counter.png" alt="red-counter" class="counter-noshadow">';
        greenCounter = '<img src="assets/images/green-gem-counter.png" alt="green-counter" class="counter-noshadow">';
        yellowCounter = '<img src="assets/images/yellow-gem-counter.png" alt="yellow-counter" class="counter-noshadow">';
        blueCounter = '<img src="assets/images/blue-gem-counter.png" alt="blue-counter" class="counter-noshadow">';
        orangeCounter = '<img src="assets/images/orange-gem-counter.png" alt="orange-counter" class="counter-noshadow">';
        whiteCounter = '<img src="assets/images/white-gem-counter.png" alt="white-counter" class="counter-noshadow">';
    }
});

/* buying themes */

var fruitBackgroundPurchased = false;
var pinkBackgroundPurchased = false;
var iceBackgroundPurchased = false;

function buyTheme(themeName) {
    let themes = {
        'fruit': {
            'cost': 100,
            'background': 'fruit-background',
            'inventoryBackgroundTheme': 'inventory-background-fruit-theme',
            'themeStyle': 'fruit-theme',
            'themePurchased': fruitBackgroundPurchased,
            'themeInventory': '#select-fruit-theme',
            'inventoryBackgroundImage': 'fruit-background-container',
            'storeItemContainer': '#fruit-background-purchase',
            'playButton': 'play-button-fruit'
        },
        'pink': {
            'cost': 200,
            'background': 'pink-background',
            'inventoryBackgroundTheme': 'inventory-background-pink-theme',
            'themeStyle': 'pink-theme',
            'themePurchased': pinkBackgroundPurchased,
            'themeInventory': '#select-pink-theme',
            'inventoryBackgroundImage': 'pink-background-container',
            'storeItemContainer': '#pink-background-purchase',
            'playButton': 'play-button-pink'
        },
        'ice': {
            'cost': 300,
            'background': 'ice-background',
            'inventoryBackgroundTheme': 'inventory-background-ice-theme',
            'themeStyle': 'ice-theme',
            'themePurchased': iceBackgroundPurchased,
            'themeInventory': '#select-ice-theme',
            'inventoryBackgroundImage': 'ice-background-container',
            'storeItemContainer': '#ice-background-purchase',
            'playButton': 'play-button-ice'
        },
    };
    let theme = themes[themeName];

    if (coins >= theme.cost && theme.themePurchased == false) {
        $('body').removeClass('ice-background');
        $('body').removeClass('pink-background');
        $('body').removeClass('fruit-background');
        $('body').addClass(theme.background);
        $('.theme').removeClass('ice-theme');
        $('.theme').removeClass('pink-theme');
        $('.theme').removeClass('fruit-theme');
        $('.theme').addClass(theme.themeStyle);
        $('.inventory-sections').removeClass('inventory-background-classic-theme');
        $('.inventory-sections').removeClass('inventory-background-pink-theme');
        $('.inventory-sections').removeClass('inventory-background-ice-theme');
        $('.inventory-sections').removeClass('inventory-background-fruit-theme');
        $('.inventory-sections').addClass(theme.inventoryBackgroundTheme);
        $('#player-name-stats').removeClass('pink-theme');
        $('#player-name-stats').removeClass('ice-theme');
        $('#player-name-stats').removeClass('fruit-theme');
        $('#player-name-stats').removeClass('colour-secondary');
        $('#player-name-stats').addClass(theme.themeStyle);
        $('#ready-button').removeClass('play-button-classic');
        $('#ready-button').removeClass('play-button-fruit');
        $('#ready-button').removeClass('play-button-ice');
        $('#ready-button').removeClass('play-button-pink');
        $('#ready-button').addClass(theme.playButton);
        currentTheme = theme.themeStyle;
        currentThemePlayButton = theme.playButton;
        for (let i = 0; i < theme.cost; i++) {
            coins--;
        }
        $('#player-coins').html(coins);
        $(theme.themeInventory).children().remove();
        $(theme.themeInventory).addClass(theme.inventoryBackgroundImage);
        $(theme.themeInventory).addClass('themes-unlocked');
        $(theme.storeItemContainer).children('p').remove();
        $(theme.storeItemContainer).append('<p class="text-success"><b>Purchased</b></p><i class="fas fa-check text-success"></i>');
    }
}

$('#fruit-background-purchase').on('click', function () {
    if (coins >= 100) {
        buyTheme('fruit');
        fruitBackgroundPurchased = true;
    }
});

$('#pink-background-purchase').on('click', function () {
    if (coins >= 200) {
        buyTheme('pink');
        pinkBackgroundPurchased = true;
    }
});

$('#ice-background-purchase').on('click', function () {
    if (coins >= 300) {
        buyTheme('ice');
        iceBackgroundPurchased = true;
    }
});

/* selecting theme */

var currentTheme = 'classic-theme';
var currentThemePlayButton = 'play-button-classic';

function changeTheme(themeName) {
    let themes = {
        'classic': {
            'background': 'classic-background',
            'inventoryBackground': 'inventory-background-classic-theme',
            'themeStyle': 'classic-theme',
            'playButton': 'play-button-classic'
        },
        'fruit': {
            'background': 'fruit-background',
            'inventoryBackground': 'inventory-background-fruit-theme',
            'themeStyle': 'fruit-theme',
            'playButton': 'play-button-fruit'
        },
        'pink': {
            'background': 'pink-background',
            'inventoryBackground': 'inventory-background-pink-theme',
            'themeStyle': 'pink-theme',
            'playButton': 'play-button-pink'
        },
        'ice': {
            'background': 'ice-background',
            'inventoryBackground': 'inventory-background-ice-theme',
            'themeStyle': 'ice-theme',
            'playButton': 'play-button-ice'
        },
    };
    let theme = themes[themeName];
    $('body').removeClass('ice-background');
    $('body').removeClass('pink-background');
    $('body').removeClass('fruit-background');
    $('body').addClass(theme.background);
    $('.theme').removeClass('ice-theme');
    $('.theme').removeClass('pink-theme');
    $('.theme').removeClass('fruit-theme');
    $('.theme').addClass(theme.themeStyle);
    $('.inventory-sections').removeClass('inventory-background-classic-theme');
    $('.inventory-sections').removeClass('inventory-background-pink-theme');
    $('.inventory-sections').removeClass('inventory-background-ice-theme');
    $('.inventory-sections').removeClass('inventory-background-fruit-theme');
    $('.inventory-sections').addClass(theme.inventoryBackground);
    $('#player-name-stats').removeClass('pink-theme');
    $('#player-name-stats').removeClass('ice-theme');
    $('#player-name-stats').removeClass('fruit-theme');
    $('#player-name-stats').removeClass('colour-secondary');
    $('#player-name-stats').addClass(theme.themeStyle);
    $('#ready-button').removeClass('play-button-classic');
    $('#ready-button').removeClass('play-button-fruit');
    $('#ready-button').removeClass('play-button-ice');
    $('#ready-button').removeClass('play-button-pink');
    $('#ready-button').addClass(theme.playButton);
    currentTheme = theme.themeStyle;
    currentThemePlayButton = theme.playButton;
}

$('#select-classic-theme').on('click', function () {
    changeTheme('classic');
});

$('#select-fruit-theme').on('click', function () {
    if (fruitBackgroundPurchased == true) {
        changeTheme('fruit');
    }
});

$('#select-pink-theme').on('click', function () {
    if (pinkBackgroundPurchased == true) {
        changeTheme('pink');
    }
});

$('#select-ice-theme').on('click', function () {
    if (iceBackgroundPurchased == true) {
        changeTheme('ice');
    }
});

/* to start the game */

function start() {
    timerSec = 0;
    timerMin = 0;
    $('#timer-min').html(timerMin);
    $('#timer-sec').html(timerSec);
    fullGames++;
    $('.counter').remove();
    $('.marker-peg').remove();
    round = 1;
    holeSelect = 1;
    selectedHole();
    if (soundOn == true) {
        startSound.play();
    }
    $('#master-cover').removeClass('d-none');
    $('#master-cover').addClass('fade-in');
    $('#ready-button').remove();
    $('.left-play-arrow').remove();
    $('.right-play-arrow').remove();
    $('#round-counter').html(round);
    setTimeout(function () {
        generateCounters(difficultyGenerate);
        gameStarted = true;
        timer = true;
        timerFunction();
        winnerBoolean = false;
    }, 1500);
}

/* generated counters animation before the game starts */

function loop() {
    if (gameStarted == false) {
        setTimeout(function () {
            if (gameStarted == false) {
                loop();
                generateCounters(difficultyGenerate);
            }
        }, 250);
    }
}

/* computer generated counters */

function generateCounters(difficulty) {
    masterLocationOne = Math.floor(Math.random() * difficulty);
    masterLocationTwo = Math.floor(Math.random() * difficulty);
    masterLocationThree = Math.floor(Math.random() * difficulty);
    masterLocationFour = Math.floor(Math.random() * difficulty);

    if (masterLocationOne == 0) {
        $('#master-one').html(redCounter);
    } else if (masterLocationOne == 1) {
        $('#master-one').html(greenCounter);
    } else if (masterLocationOne == 2) {
        $('#master-one').html(yellowCounter);
    } else if (masterLocationOne == 3) {
        $('#master-one').html(blueCounter);
    } else if (masterLocationOne == 4) {
        $('#master-one').html(orangeCounter);
    } else if (masterLocationOne == 5) {
        $('#master-one').html(whiteCounter);
    } else {
        $('#master-one').html('');
    }

    if (masterLocationTwo == 0) {
        $('#master-two').html(redCounter);
    } else if (masterLocationTwo == 1) {
        $('#master-two').html(greenCounter);
    } else if (masterLocationTwo == 2) {
        $('#master-two').html(yellowCounter);
    } else if (masterLocationTwo == 3) {
        $('#master-two').html(blueCounter);
    } else if (masterLocationTwo == 4) {
        $('#master-two').html(orangeCounter);
    } else if (masterLocationTwo == 5) {
        $('#master-two').html(whiteCounter);
    } else {
        $('#master-two').html('');
    }

    if (masterLocationThree == 0) {
        $('#master-three').html(redCounter);
    } else if (masterLocationThree == 1) {
        $('#master-three').html(greenCounter);
    } else if (masterLocationThree == 2) {
        $('#master-three').html(yellowCounter);
    } else if (masterLocationThree == 3) {
        $('#master-three').html(blueCounter);
    } else if (masterLocationThree == 4) {
        $('#master-three').html(orangeCounter);
    } else if (masterLocationThree == 5) {
        $('#master-three').html(whiteCounter);
    } else {
        $('#master-three').html('');
    }

    if (masterLocationFour == 0) {
        $('#master-four').html(redCounter);
    } else if (masterLocationFour == 1) {
        $('#master-four').html(greenCounter);
    } else if (masterLocationFour == 2) {
        $('#master-four').html(yellowCounter);
    } else if (masterLocationFour == 3) {
        $('#master-four').html(blueCounter);
    } else if (masterLocationFour == 4) {
        $('#master-four').html(orangeCounter);
    } else if (masterLocationFour == 5) {
        $('#master-four').html(whiteCounter);
    } else {
        $('#master-four').html('');
    }
}

function chooseColour(chosenColour, colourNum) {
    if (gameStarted == true) {
        var countHoleSelector = '#r-' + round;
        counterDownSound();
        $('.hole-selector').remove();

        if (holeSelect == 1) {
            $(countHoleSelector + '-c-one').append(chosenColour);
            $(countHoleSelector + '-c-two').append('<i class="fas fa-long-arrow-alt-down hole-selector"></i>');
            holeSelect++;
            playerLocationOne = colourNum;
        } else if (holeSelect == 2) {
            $(countHoleSelector + '-c-two').html(chosenColour);
            $(countHoleSelector + '-c-three').append('<i class="fas fa-long-arrow-alt-down hole-selector"></i>');
            holeSelect++;
            playerLocationTwo = colourNum;
        } else if (holeSelect == 3) {
            $(countHoleSelector + '-c-three').html(chosenColour);
            $(countHoleSelector + '-c-four').append('<i class="fas fa-long-arrow-alt-down hole-selector"></i>');
            holeSelect++;
            playerLocationThree = colourNum;
        } else if (holeSelect == 4) {
            $(countHoleSelector + '-c-four').html(chosenColour);
            $('#check-round-arrow').append('<i class="fas fa-long-arrow-alt-right hole-selector hole-selector-check"></i>');
            holeSelect++;
            playerLocationFour = colourNum;
        }
        selectedHole();
    }
}

/* sound randomised for when the player places a counter */

function counterDownSound() {
    if (soundOn == true) {
        var pick = Math.floor(Math.random() * 3);
        if (pick == 0) {
            counterDown.play();
        } else if (pick == 1) {
            counterDownTwo.play();
        } else if (pick == 2) {
            counterDownThree.play();
        }
    }
}

/* A arrow showing the user where the next counter will go */

function selectedHole() {
    var countHoleSelector = '#r-' + round;
    $('.hole-selector').remove();
    if (holeSelect == 1) {
        $(countHoleSelector + '-c-one').append('<i class="fas fa-long-arrow-alt-down hole-selector"></i>');
    } else if (holeSelect == 2) {
        $(countHoleSelector + '-c-two').append('<i class="fas fa-long-arrow-alt-down hole-selector"></i>');
    } else if (holeSelect == 3) {
        $(countHoleSelector + '-c-three').append('<i class="fas fa-long-arrow-alt-down hole-selector"></i>');
    } else if (holeSelect == 4) {
        $(countHoleSelector + '-c-four').append('<i class="fas fa-long-arrow-alt-down hole-selector"></i>');
    } else if (holeSelect == 5) {
        $('#check-round-arrow').append('<i class="fas fa-long-arrow-alt-right hole-selector hole-selector-check"></i>');
    }
}

function removeCounter() {
    if (gameStarted == true) {
        var countHoleSelector = '#r-' + round;
        if (soundOn == true) {
            removeCounterSound.play();
        }
        if (holeSelect == 2) {
            $(countHoleSelector + '-c-one').html('');
            holeSelect--;
            selectedHole();

        } else if (holeSelect == 3) {
            $(countHoleSelector + '-c-two').html('');
            holeSelect--;
            selectedHole();

        } else if (holeSelect == 4) {
            $(countHoleSelector + '-c-three').html('');
            holeSelect--;
            selectedHole();

        } else if (holeSelect == 5) {
            $(countHoleSelector + '-c-four').html('');
            holeSelect--;
            selectedHole();

        }
    }
}

function checkCounters() {
    if (gameStarted == true && holeSelect == 5) {
        var blackPeg = '<img src="{{ url_for("static", filename="img/mastermind/black-peg.png") }}" class="marker-peg">';
        var whitePeg = '<img src="{{ url_for("static", filename="img/mastermind/white-peg.png") }}" class="marker-peg">';

        var countHoleSelector = '#peg-container-' + round;
        var playerLocationOneChecked = false;
        var playerLocationTwoChecked = false;
        var playerLocationThreeChecked = false;
        var playerLocationFourChecked = false;

        var masterLocationOneChecked = false;
        var masterLocationTwoChecked = false;
        var masterLocationThreeChecked = false;
        var masterLocationFourChecked = false;

        if (soundOn == true) {
            lineCheckedSound.play();
        }

        /* check to see if the colour is correct and in the right location */

        if (masterLocationOne == playerLocationOne) {
            $(countHoleSelector).append(blackPeg);
            playerLocationOneChecked = true;
            masterLocationOneChecked = true;

        }
        if (masterLocationTwo == playerLocationTwo) {
            $(countHoleSelector).append(blackPeg);
            playerLocationTwoChecked = true;
            masterLocationTwoChecked = true;

        }
        if (masterLocationThree == playerLocationThree) {
            $(countHoleSelector).append(blackPeg);
            playerLocationThreeChecked = true;
            masterLocationThreeChecked = true;

        }
        if (masterLocationFour == playerLocationFour) {
            $(countHoleSelector).append(blackPeg);
            playerLocationFourChecked = true;
            masterLocationFourChecked = true;
        }

        /* check if the correct colour in the wrong loction  */

        if (masterLocationOneChecked == false) {
            if (masterLocationOne == playerLocationTwo && playerLocationTwoChecked == false) {
                $(countHoleSelector).append(whitePeg);
                playerLocationTwoChecked = true;
            } else if (masterLocationOne == playerLocationThree && playerLocationThreeChecked == false) {
                $(countHoleSelector).append(whitePeg);
                playerLocationThreeChecked = true;
            } else if (masterLocationOne == playerLocationFour && playerLocationFourChecked == false) {
                $(countHoleSelector).append(whitePeg);
                playerLocationFourChecked = true;
            }
        }

        if (masterLocationTwoChecked == false) {
            if (masterLocationTwo == playerLocationOne && playerLocationOneChecked == false) {
                $(countHoleSelector).append(whitePeg);
                playerLocationOneChecked = true;
            } else if (masterLocationTwo == playerLocationThree && playerLocationThreeChecked == false) {
                $(countHoleSelector).append(whitePeg);
                playerLocationThreeChecked = true;
            } else if (masterLocationTwo == playerLocationFour && playerLocationFourChecked == false) {
                $(countHoleSelector).append(whitePeg);
                playerLocationFourChecked = true;
            }
        }

        if (masterLocationThreeChecked == false) {
            if (masterLocationThree == playerLocationOne && playerLocationOneChecked == false) {
                $(countHoleSelector).append(whitePeg);
                playerLocationOneChecked = true;
            } else if (masterLocationThree == playerLocationTwo && playerLocationTwoChecked == false) {
                $(countHoleSelector).append(whitePeg);
                playerLocationTwoChecked = true;
            } else if (masterLocationThree == playerLocationFour && playerLocationFourChecked == false) {
                $(countHoleSelector).append(whitePeg);
                playerLocationFourChecked = true;
            }
        }

        if (masterLocationFourChecked == false) {
            if (masterLocationFour == playerLocationOne && playerLocationOneChecked == false) {
                $(countHoleSelector).append(whitePeg);
                playerLocationOneChecked = true;
            } else if (masterLocationFour == playerLocationTwo && playerLocationTwoChecked == false) {
                $(countHoleSelector).append(whitePeg);
                playerLocationTwoChecked = true;
            } else if (masterLocationFour == playerLocationThree && playerLocationThreeChecked == false) {
                $(countHoleSelector).append(whitePeg);
                playerLocationThreeChecked = true;
            }
        }

        if (masterLocationOne == playerLocationOne && masterLocationTwo == playerLocationTwo && masterLocationThree == playerLocationThree && masterLocationFour == playerLocationFour) {
            levelComplete();
            winnerBoolean = true;
        }

        if (round == 10 && winnerBoolean == false) {
            if (soundOn == true) {
                gameOverSound.play();
            }
            levelLost();
        }

        round++;
        holeSelect = 1;
        $('#round-counter').html(round);
        playerLocationOne = 0;
        playerLocationTwo = 0;
        playerLocationThree = 0;
        playerLocationFour = 0;
        selectedHole();
    }
}

function levelComplete() {
    $('#round-counter').html(1);
    $('.counter').remove();
    $('.basic-counter').remove();
    $('.counter-noshadow').remove();
    $('.marker-peg').remove();
    timer = false;
    if (difficultySetting == 'easy') {
        difficultyBonus = 50;
    } else if (difficultySetting == 'medium') {
        difficultyBonus = 100;
    } else if (difficultySetting == 'hard') {
        difficultyBonus = 150;
    }
    if (timerMin < 1) {
        timerBonus = 50;
    } else if (timerMin < 2) {
        timerBonus = 35;
    } else if (timerMin < 3) {
        timerBonus = 15;
    } else if (timerMin < 4) {
        timerBonus = 0;
    }
    var timerBonus;
    var difficultyBonus;
    var roundCoinBonus = (10 - round + 1) * 10;
    var totalRoundCoins = 50 + roundCoinBonus + difficultyBonus + timerBonus;
    /* adding stats */
    $('#stats-table').append(`
     <tr>
     <th class="theme ${currentTheme}">${fullGames}</th>
     <td>${round}</td>
     <td>${timerMin} : ${timerSec}</td>
     <td>${totalRoundCoins}</td>
     <td class="${difficultySetting}">${difficultyStats}</td>
     </tr>
     `);

    $('#attempts-round-' + fullGames).text(round);
    $('#attempts-round').html(round);
    $('#master-cover').removeClass('fade-in');
    $('#master-cover').addClass('d-none');
    $('.hole-selector').remove();
    if (soundOn == true) {
        gameWon.play();
    }
    gameStarted = false;

    /* putting play button back */

    $('#ready-start-button-container').html(`
        <i class="fas fa-long-arrow-alt-right left-play-arrow"></i>
        <button onclick="start()" id="ready-button" class="${currentThemePlayButton}">Play!<i class="mx-2 fas fa-play"></i></button>
        <i class="fas fa-long-arrow-alt-left right-play-arrow"></i>
    `);

    /* adding coins */

    for (let i = 0; i < totalRoundCoins; i++) {
        coins++;
    }

    $('#round-coin-bonus').html(roundCoinBonus);
    $('#total-coins-round').html(totalRoundCoins);
    $('#player-coins').html(coins);
    $('#difficulty-bonus').html(difficultyBonus);
    $('#timer-bonus').html(timerBonus);

    /* total stats */
    totalStatAttempts = addingTotalStats(round, totalStatAttempts);
    $('#totalStatAttempts').html(totalStatAttempts);
    totalStatCoins = addingTotalStats(totalRoundCoins, totalStatCoins);
    $('#totalStatCoins').html(totalStatCoins);

    /* winner modal */

    setTimeout(function () {
        $('.hole-selector').remove();
        $('#player-name-winner').text(playerName);
        $('#time-taken-min').html(timerMin);
        $('#time-taken-sec').html(timerSec);
        $('#winnerModal').modal({
            backdrop: 'static',
            keyboard: false
        });
        $('#timer-min').html(0);
        $('#timer-sec').html(0);
    }, 200);
}

function levelLost() {
    timer = false;
    gameStarted = false;
    $('#ready-start-button-container').html(`
        <i class="fas fa-long-arrow-alt-right left-play-arrow"></i>
        <button onclick="start()" id="ready-button" class="${currentThemePlayButton}">Play!<i class="mx-2 fas fa-play"></i></button>
        <i class="fas fa-long-arrow-alt-left right-play-arrow"></i>
    `);
    for (let i = 0; i < 50; i++) {
        coins--;
    }
    $('#player-coins').html(coins);
    $('.marker-peg').remove();
    $('#round-counter').html(1);
    $('#master-cover').addClass('d-none');
    setTimeout(function () {
        $('#player-name-loser').text(playerName);
        $('.counter').remove();
        $('.basic-counter').remove();
        $('.counter-noshadow').remove();
        $('#loserModal').modal({
            backdrop: 'static',
            keyboard: false
        });
    }, 200);
    totalStatAttempts = addingTotalStats(round, totalStatAttempts);
    $('#totalStatAttempts').html(totalStatAttempts);

}

/* Timer */

var timerSec = 0;
var timerMin = 0;
var timer = false;

function timerFunction() {
    if (timer == true) {
        setTimeout(function () {
            timerSec++;
            $('#timer-min').html(timerMin);
            $('#timer-sec').html(timerSec);
            if (timerSec == 60) {
                timerSec = 0;
                timerMin++;
            }
            timerFunction();
        }, 1000);
    }
}

/* Total stats */

var totalStatAttempts = 0;
var totalStatCoins = 0;

function addingTotalStats(numOne, numTwo) {
    return numOne + numTwo;
}

</script>
{% endblock %}